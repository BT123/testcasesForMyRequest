Python wave.py 漏洞分析

影响版本：2.7.x，3.4.x，3.5.x，3.6.x，包括目前最新的3.6.3（2017-10-03）

漏洞原因：
	在librosa语音库中的处理，底层使用的是audioread python库，而audioread库的底层使用的是Python的wave模块（即wave.py）、MAD、Core Audio、GStreamer、FFmpeg等语音处理库。

	在处理wav格式文件时首先调用wave.open函数，即wave模块来进行处理；

	然后依次调用Wave_read.__init__()函数，并在其中调用initfp函数，最终在initfp中调用_read_fmt_chunk()来读取解析Audio文件中的fmt格式信息；

	在_read_fmt_chunk函数中，使用struct.unpack_from读取格式化字符串，即Audio文件的fmt信息，并进行参数的赋值；

	但是只对FormatTag进行了验证，对其他参数并没有验证，直接使用self._channels参数进行计算，导致self._framesize为0，最终导致initfp函数的除0错误。

漏洞代码如下：
Python/Lib/wave.py:253
    def _read_fmt_chunk(self, chunk):
        wFormatTag, self._nchannels, self._framerate, dwAvgBytesPerSec, wBlockAlign = struct.unpack_from('<HHLLH', chunk.read(14))
		if wFormatTag == WAVE_FORMAT_PCM:
            sampwidth = struct.unpack_from('<H', chunk.read(2))[0]
            self._sampwidth = (sampwidth + 7) // 8
        else:
            raise Error('unknown format: %r' % (wFormatTag,))
        self._framesize = self._nchannels * self._sampwidth		// 直接使用解析到的声道参数，并未进行验证
        self._comptype = 'NONE'
        self._compname = 'not compressed'


